/* Tailwind v4 directives - MUST be first */
@import 'tailwindcss';

/* All external and design imports must appear before any rules */
@import url('https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@300;400;500;600;700&display=swap');
@import './styles/design-tokens.css';
@import './styles/design-system.css';
@import './styles/utility-classes.css';
@import './styles/components/badge.css';
@import './styles/components/footer.css';
@import './styles/micro-interactions.css';
@import './styles/typography.css';
@import './styles/layout.css';
/* Restored responsive layout primitives (phone frame fix) */
@import './styles/responsive-layout.css';
/* Global brand background */
@import './styles/global-background.css';
/* Force navigation teal background - highest priority */
@import './styles/force-nav-teal.css';

/* Ensure root scroll container has a non-static position so JS scroll
  calculations (framer-motion useScroll) work reliably without global
  layout changes. This is minimal and safe. */
html,
body,
#root {
  position: relative;
}

/* Tailwind v4 Theme - Custom Colors */
@theme {
  /* Brand Colors */
  --color-accent-primary: var(--orange-primary);
  --color-accent-primary-hover: var(--orange-hover);
  --color-accent-primary-light: var(--orange-light);

  /* Dark Blue Palette */
  --color-navy: var(--navy-primary);
  --color-navy-dark: var(--navy-dark);
  --color-navy-light: var(--navy-light);

  /* Off-white Palette */
  --color-offwhite: var(--offwhite-primary);
  --color-offwhite-secondary: var(--offwhite-secondary);

  /* Muted */
  --color-muted: rgb(var(--brand-grey-rgb));
}

/* Critical: Full viewport height for React SPA */
html,
body,
#root {
  min-height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
  /* Brand dark teal - fallback behind the animated gradient */
  background-color: rgb(0, 30, 50);
}

body {
  overflow-y: auto;
  font-family: 'Source Sans Pro', 'proxima-nova', sans-serif;
  color: var(--color-text-on-dark);
  /* Transparent so the fixed gradient layer shows through */
  background-color: transparent;
}

/* Fixed background animation layer (mounted in main.tsx) */
.vb-fixed-bg {
  width: 100vw;
  height: 100vh;
}

/* iOS Safari/WebKit: stabilize viewport sizing and compositing for fixed+filter+blend */
@supports (-webkit-touch-callout: none) {
  .vb-fixed-bg {
    height: 100dvh;
  }

  .vb-fixed-bg,
  .vb-fixed-bg .gradients-container {
    isolation: isolate;
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
    will-change: transform, opacity;
  }

  /* Safari mitigation: avoid SVG filter url(#goo) artifacts on fixed layers.
     Keep a visually similar blur. */
  .vb-fixed-bg .gradients-container {
    filter: blur(40px) !important;
  }
}

/* ============================================
   AURORA BACKGROUND - REAL FLOWING WAVES
   Northern lights effect with gradient animation
   ============================================ */

@keyframes aurora-shift-1 {
  0%, 100% {
    transform: translateY(0) scaleY(1);
    opacity: 0.6;
  }
  25% {
    transform: translateY(-15px) scaleY(1.1);
    opacity: 0.8;
  }
  50% {
    transform: translateY(-5px) scaleY(0.95);
    opacity: 0.5;
  }
  75% {
    transform: translateY(-20px) scaleY(1.15);
    opacity: 0.7;
  }
}

@keyframes aurora-shift-2 {
  0%, 100% {
    transform: translateX(0) translateY(0) scaleX(1);
    opacity: 0.3;
  }
  33% {
    transform: translateX(30px) translateY(-10px) scaleX(1.1);
    opacity: 0.5;
  }
  66% {
    transform: translateX(-20px) translateY(-15px) scaleX(0.9);
    opacity: 0.35;
  }
}

@keyframes aurora-shift-3 {
  0%, 100% {
    transform: translateY(0) scale(1);
    opacity: 0.15;
  }
  50% {
    transform: translateY(-25px) scale(1.2);
    opacity: 0.25;
  }
}

@keyframes aurora-rays-move {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(100px);
  }
}

/* Pulsing glow effect */
@keyframes aurora-pulse {
  0%, 100% {
    filter: blur(60px) brightness(1);
  }
  50% {
    filter: blur(80px) brightness(1.2);
  }
}

.aurora-wave-1 {
  will-change: transform, opacity;
}

.aurora-wave-2 {
  will-change: transform, opacity;
}

.aurora-wave-3 {
  will-change: transform, opacity;
}

.aurora-rays {
  will-change: transform;
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce) {
  .aurora-wave-1,
  .aurora-wave-2,
  .aurora-wave-3,
  .aurora-rays {
    animation: none !important;
  }
}
