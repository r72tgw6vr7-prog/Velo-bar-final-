/* Tailwind v4 directives - MUST be first */
@import 'tailwindcss';

/* All external and design imports must appear before any rules */
@import url('https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@300;400;500;600;700&display=swap');
@import './styles/design-tokens.css';
@import './styles/design-system.css';
@import './styles/utility-classes.css';
@import './styles/components/badge.css';
@import './styles/components/footer.css';
@import './styles/micro-interactions.css';
@import './styles/typography.css';
@import './styles/layout.css';
/* Restored responsive layout primitives (phone frame fix) */
@import './styles/responsive-layout.css';
/* Global brand background */
@import './styles/global-background.css';
/* Force navigation teal background - highest priority */
@import './styles/force-nav-teal.css';

/* Ensure root scroll container has a non-static position so JS scroll
  calculations (framer-motion useScroll) work reliably without global
  layout changes. This is minimal and safe. */
html,
body,
#root {
  position: relative;
}

/* Tailwind v4 Theme - Custom Colors */
@theme {
  /* Brand Colors */
  --color-accent-primary: var(--orange-primary);
  --color-accent-primary-hover: var(--orange-hover);
  --color-accent-primary-light: var(--orange-light);

  /* Dark Blue Palette */
  --color-navy: var(--navy-primary);
  --color-navy-dark: var(--navy-dark);
  --color-navy-light: var(--navy-light);

  /* Off-white Palette */
  --color-offwhite: var(--offwhite-primary);
  --color-offwhite-secondary: var(--offwhite-secondary);

  /* Muted */
  --color-muted: rgb(var(--brand-grey-rgb));
}

/* Critical: Full viewport height for React SPA */
html,
body,
#root {
  min-height: 100%;
  width: 100%;
  margin: 0;
  padding: 0;
  /* Brand dark teal - fallback behind the animated gradient */
  background-color: rgb(0, 30, 50);
}

body {
  overflow-y: auto;
  font-family: 'Source Sans Pro', 'proxima-nova', sans-serif;
  color: var(--color-text-on-dark);
  /* Transparent so the fixed gradient layer shows through */
  background-color: transparent;
}

/* Fixed background animation layer (mounted in main.tsx) */
.vb-fixed-bg {
  width: 100vw;
  height: 100vh;
}

/* iOS Safari/WebKit: stabilize viewport sizing and compositing for fixed+filter+blend */
@supports (-webkit-touch-callout: none) {
  .vb-fixed-bg {
    height: 100dvh;
  }

  .vb-fixed-bg,
  .vb-fixed-bg .gradients-container {
    isolation: isolate;
    transform: translate3d(0, 0, 0);
    backface-visibility: hidden;
    will-change: transform, opacity;
  }

  /* Safari mitigation: avoid SVG filter url(#goo) artifacts on fixed layers.
     Keep a visually similar blur. */
  .vb-fixed-bg .gradients-container {
    filter: blur(40px) !important;
  }
}

/* Aceternity Background Gradient Animation keyframes */
@keyframes first {
  0% {
    transform: translate(0px, 0px) scale(1);
  }
  33% {
    transform: translate(30px, -50px) scale(1.1);
  }
  66% {
    transform: translate(-20px, 20px) scale(0.9);
  }
  100% {
    transform: translate(0px, 0px) scale(1);
  }
}

@keyframes second {
  0% {
    transform: translate(0px, 0px) scale(1) rotate(0deg);
  }
  33% {
    transform: translate(-20px, -30px) scale(1.1) rotate(120deg);
  }
  66% {
    transform: translate(30px, 10px) scale(0.9) rotate(240deg);
  }
  100% {
    transform: translate(0px, 0px) scale(1) rotate(360deg);
  }
}

@keyframes third {
  0% {
    transform: translate(0px, 0px) scale(1);
  }
  33% {
    transform: translate(-30px, 30px) scale(0.9);
  }
  66% {
    transform: translate(20px, -20px) scale(1.1);
  }
  100% {
    transform: translate(0px, 0px) scale(1);
  }
}

@keyframes fourth {
  0% {
    transform: translate(0px, 0px) scale(1);
  }
  33% {
    transform: translate(20px, 30px) scale(1.1);
  }
  66% {
    transform: translate(-30px, -10px) scale(0.9);
  }
  100% {
    transform: translate(0px, 0px) scale(1);
  }
}

@keyframes fifth {
  0% {
    transform: translate(0px, 0px) scale(1) rotate(0deg);
  }
  33% {
    transform: translate(-10px, 20px) scale(0.9) rotate(-120deg);
  }
  66% {
    transform: translate(25px, -15px) scale(1.1) rotate(-240deg);
  }
  100% {
    transform: translate(0px, 0px) scale(1) rotate(-360deg);
  }
}

/* Background gradient animation utilities (Aceternity-style orbs) */
/* Timings match Aceternity's exact values */
.animate-first {
  animation: first 30s ease-in-out infinite;
}

.animate-second {
  animation: second 20s linear infinite;
}

.animate-third {
  animation: third 40s linear infinite;
}

.animate-fourth {
  animation: fourth 40s ease-in-out infinite;
}

.animate-fifth {
  animation: fifth 20s ease-in-out infinite;
}
